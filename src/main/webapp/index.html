<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projet Transilien</title>
<!-- Bootstrap -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
<link rel="stylesheet" href="lib/leaflet-0.7.3/leaflet.css" />
<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<!-- Debut du contenu du dashboard -->
	<div id="dashboard" class="col-md-3">
		<div class="panel-group" id="accordion">
			  <div class="panel panel-default">
				<div class="panel-heading">
				  <h4 class="panel-title">
					<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
					  Calculer un itinéraire
					</a>
				  </h4>
				</div>
				<div id="collapseOne" class="panel-collapse collapse in">
				  <div class="panel-body">
				  <form role="form">
					  <div class="form-group">
						<label for="adresseDepart">Départ</label>
						<input type="text" class="form-control" id="adresseDepart" placeholder="Entrer une adresse de départ">
					  </div>
					  <div class="form-group">
						<label for="adresseDestination">Destination</label>
						<input type="text" class="form-control" id="adresseDestination" placeholder="Entrer une adresse de destination">
					  </div>
					  <button type="submit" class="btn btn-primary">Chercher un itinéraire</button>
					</form>				  
				  </div>
				</div>
			  </div>
			  <div class="panel panel-default">
				<div class="panel-heading">
				  <h4 class="panel-title">
					<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
					  Informations sur une gare
					</a>
				  </h4>
				</div>
				<div id="collapseTwo" class="panel-collapse collapse">
					<div class="panel-body">
						<form role="form">
						  <div class="form-group">
							<label for="selectionGare">Selectionner une gare</label>
							 <select class="form-control">
							</select>
						  </div>
						  <button type="submit" class="btn btn-primary">Afficher les informations</button>
						</form>	
					</div>
				</div>
			  </div>
		</div>
	</div>
	<!-- Fin du contenu du dashboard -->
	<!-- Debut contenu de la barre de menu -->
	<div class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Projet Transilien</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Accueil</a></li>
					<li><a href="#about">A propos</a></li>
					<li><a href="#contact">Contact</a></li>
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown">Autres <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="#">Action</a></li>
							<li><a href="#">Action 2</a></li>
							<li><a href="#">Action 3</a></li>
							<li class="divider"></li>
							<li class="dropdown-header">Sous titre</li>
							<li><a href="#">Action 1</a></li>
							<li><a href="#">Action 2</a></li>
						</ul></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- Fin contenu de la barre de menu -->
	<!-- Debut du contenant de la map -->
	<div id="map">
	</div>
	<!-- Fin du contenant de la map-->
	<!-- jQuery  -->
	<script src="js/jquery-1.11.1.min.js"></script>
	<!-- Bootstrap JS  -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Diagramme camembert -->
	<script src="js/highcharts.js"></script>
	<!-- Notre biblioteque JS -->
	<script src="js/transilienUPMC.js"></script>
	<!-- Map JS  -->
	<script src="lib/leaflet-0.7.3/leaflet.js"></script>
</body>

<!--  PARTIE APPEL API (KEVIN) -->
<!-- Tout à la fin de la page html: -->
<script>
	/*
	var init = function() {
		var rootApi = 'http://localhost:8080/_ah/api';
		gapi.client.load('todos', 'v1', function() {
			console.log("todos api loaded");
		}, rootApi);
		// Appeler l'api todos
		gapi.client.todos.list().execute(function(resp) {
			console.log(resp);
		});
	}*/
	
	
	
	
// Mettre le map a la coordonnee au demarrage 
// Sur Chatelet Paris en position 48.858755;48.858755
// Avec un zoom de niveau 13
var map = L.map('map').setView([48.858755, 2.347531], 13);

// Utilisation dun title(cartographie) mapbox avec ma cle session 
// Zoom de niveau 18 maximum autoriser
L.tileLayer('https://{s}.tiles.mapbox.com/v3/magstellon.joaljn60/{z}/{x}/{y}.png', {
    maxZoom: 18
}).addTo(map);

// Initialise l'environnement
main();

// Appel AJAX pour recuperer la liste des gares

// Variable pour stocker un point de la carte
var marker;
// Call ajax sur l'API listGares et retourne un JSON dans la variable data
$.get(environnement.routes["getGaresList"], function(data) {
	for(i in data.items){
		/* Maj de la MAP */
		// Creation dune variable temporaire pour stocker une coordonnee
		point = data.items[i];
		// On crée un point sur la carte
		marker = L.marker([ parseFloat(point.lattitude),parseFloat(point.longitude)]).addTo(map);
		// On ajoute les informations info bulle à ce point
		marker.bindPopup("<b>"+point.nom+"</b><br>Code UIC : "+point.codeUIC+".");
		
		/* Maj du select dans la section 'Informations sur une gare' */
		$("#collapseTwo select").append("<option>"+point.nom+"</option>");
	}
});




	
		
</script>
<!--<script src="https://apis.google.com/js/client.js?onload=init"></script>-->
</html>